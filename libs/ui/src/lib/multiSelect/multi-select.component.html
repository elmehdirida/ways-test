<mat-form-field style="width: 100%" appearance="outline">
  <mat-select
    placeholder="Select options"
    multiple
    [(ngModel)]="selectedValues"
    name="options"
  >
    <ways-test-input-ui
      *ngIf="options.length > 3"
      type="search"
      (onChangeValue)="filterOptions($event)"
    ></ways-test-input-ui>
    <ways-test-raised-button
      *ngIf="options.length > 0"
      class="clearAll"
      label="Clear Selected"
      color="warn"
      icon="clear"
      (click)="clearAll($event)"
    ></ways-test-raised-button>

    <mat-checkbox
      [checked]="isAllSelected()"
      [indeterminate]="isIndeterminate()"
      color="primary"
      (change)="toggleAllSelection()"
    >
      {{ isAllSelected() ? 'Uncheck All' : 'Check All' }}
    </mat-checkbox>

    <mat-option *ngFor="let option of filteredOptions" [value]="option.value">
      {{ option.label }}
      <button
        color="warn"
        mat-icon-button
        class="delete-icon"
        (click)="deleteSelectedOption($event, option)"
      >
        <mat-icon fontIcon="delete"></mat-icon>
      </button>
    </mat-option>

    <ways-test-divider></ways-test-divider>
    <div class="addOption">
      <div *ngIf="showAddOption">
        <ways-test-raised-button
          label="Add"
          color="primary"
          icon="add"
          type="button"
          (click)="showAddOption = false"
        ></ways-test-raised-button>
      </div>
      <div *ngIf="!showAddOption">
        <ways-test-input-ui
          type="text"
          placeHolder="Add option"
          (onChangeValue)="addOption($event)"
        ></ways-test-input-ui>
        <ways-test-raised-button
          label="Save"
          color="accent"
          icon="save"
          type="button"
          (click)="saveOption()"
        ></ways-test-raised-button>
        <ways-test-raised-button
          label="Cancel"
          color="warn"
          icon="cancel"
          type="button"
          (click)="showAddOption = true"
        ></ways-test-raised-button>
      </div>
    </div>
  </mat-select>
</mat-form-field>
